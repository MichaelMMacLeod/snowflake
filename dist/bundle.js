var Main;(()=>{"use strict";var t={d:(e,n)=>{for(var r in n)t.o(n,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};t.r(e),t.d(e,{main:()=>G});var n=2*Math.PI/6,r=.001,o=.3*r,i=[-1,-.75,-.5,-.25,0,.25,.5,.75,1];function a(t,e){return(t%e+e)%e}function c(t,e,n){return(1-n)*t+n*e}function g(t){return[t(),t(),t(),t(),t(),t()]}function h(){for(var t=[0],e=0;e<16;e++)t[e]=Math.floor(9*Math.random());return t}function l(t,e,n,r,o){var i=t.ctx.fillStyle,a=t.ctx.strokeStyle,c=t.ctx.getLineDash(),g=t.options.foregroundColor,h=r?8:5,l=o?[2,2]:[];t.ctx.beginPath(),t.ctx.arc(e,n,3,0,2*Math.PI),t.ctx.closePath(),t.ctx.fillStyle=g,t.ctx.fill(),t.ctx.closePath(),t.ctx.beginPath(),t.ctx.arc(e,n,h,0,2*Math.PI),t.ctx.strokeStyle=g,t.ctx.setLineDash(l),t.ctx.stroke(),t.ctx.fillStyle=i,t.ctx.strokeStyle=a,t.ctx.setLineDash(c)}function s(t,e,n,r,o){return{x:e/(t.growthInput.length-1)*o+r,y:4*i[t.growthInput[o]]*(n/i.length)+.5*n}}function u(t){t.ctx.clearRect(0,0,t.canvas.width,t.canvas.height)}var f=[0*n,1*n,2*n,3*n,4*n,5*n];function d(){return{x:0,y:0}}function p(t,e){return{x:t.x*Math.cos(e)-t.y*Math.sin(e),y:t.x*Math.sin(e)+t.y*Math.cos(e)}}function v(t,e){var n=t.canvas.width,r=t.canvas.height;return{x:e.x*n*.5+.5*n,y:e.y*-r*.5+.5*r}}function x(t){return"none"===t.direction?0:t.direction}function y(t){for(var e="none"===t.direction?0:t.direction,n=g(d),r=0;r<f.length;r+=1){var o=f[(e+r)%f.length];n[r].x=t.center.x+t.size*Math.cos(o),n[r].y=t.center.y+t.size*Math.sin(o)}return n}var w=function(){return w=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},w.apply(this,arguments)};function b(t){var e=f[t.direction],n=t.length;return{x:t.start.x+n*Math.cos(e),y:t.start.y+n*Math.sin(e)}}function m(t){var e=y(function(t){return w(w({},{center:{x:0,y:0},size:.0025,direction:"none",growthScale:1,growing:!0}),{center:(e=t.start,{x:e.x,y:e.y}),size:t.size,direction:t.direction});var e}(t)),n=y(function(t){return w(w({},{center:{x:0,y:0},size:.0025,direction:"none",growthScale:1,growing:!0}),{center:(e=t.start,n={x:t.length*Math.cos(f[t.direction]),y:t.length*Math.sin(f[t.direction])},{x:e.x+n.x,y:e.y+n.y}),size:t.size,direction:t.direction});var e,n}(t));return[n[0],n[1],e[2],e[3],e[4],n[5]]}function M(){return{left:{x:0,y:0},right:{x:0,y:0}}}function S(t){for(var e=g(M),n=0;n<f.length;n+=1)e[n].left=t[(n+1)%f.length],e[n].right=t[n];return e}function E(t,e){return r=function(t,r){return o=t,i=(r+e)%f.length,a=n*(1-i),c=p(o.left,a),g=p(o.right,a),{left:c.x,right:g.x,height:c.y};var o,i,a,c,g},t.map(r,undefined);var r}function k(t,e){if(t.height>e.height&&(t.left<e.left&&t.right>e.left||t.left>e.left&&e.right>t.left||t.left<e.left&&t.right>e.right||t.left>e.left&&t.right<e.right))return t.height-e.height}function T(t,e){for(var n=t.writableGraphWidth,r=t.writableGraphHeight,o=t.graphMargin,i=t.graph,a=1/0,c=0,g=0;g<i.growthInput.length;g+=1){var h=s(i,n,r,o,g).x-e.x,l=h*h;l<a&&(a=l,c=g)}return c}function I(t){var e=t.snowflake,n=t.graph,g=t.graphic,h=t.maxSteps,d=t.controls;if(t.step<h&&d.playing){t.step+=1;var p=function(t,e){var n=c(0,t.growthInput.length-1,e),r=function(t){return t%1}(n),o=c(i[t.growthInput[Math.floor(n)]],i[t.growthInput[Math.ceil(n)]],r);return{scale:(-.01*n+1)*Math.abs(o),growthType:o>0?"branching":"faceting"}}(n,function(t){return t.step/t.maxSteps}(t));void 0===t.currentGrowthType&&(t.currentGrowthType=p.growthType),t.currentGrowthType!==p.growthType&&(t.currentGrowthType=p.growthType,"branching"===t.currentGrowthType?function(t){t.faces.forEach((function(e){e.growing&&(function(t,e){for(var n,r=.01*e.size,o=.001+1*e.size*.99,i=e.center.x,c=e.center.y,g="none"===e.direction?[0,6]:[(n=e.direction,a(n-1,f.length)),3],h=g[1],l=g[0],s=function(n){var a=i+o*Math.cos(f[l]),g=c+o*Math.sin(f[l]),h="none"===e.direction||1===n?.9*e.growthScale:.5*e.growthScale*1;t.branches.push({start:{x:a,y:g},size:r,length:0,direction:l,growthScale:h,growing:!0}),l=function(t){return(t+1)%f.length}(l)},u=0;u<h;u+=1)s(u)}(t,e),e.growing=!1)}))}(e):function(t){t.branches.forEach((function(e){e.growing&&(function(t,e){t.faces.push({center:b(e),size:e.size,direction:e.direction,growthScale:e.growthScale,growing:!0})}(t,e),e.growing=!1)}))}(e));var w=function(t){var e=[[],[],[],[],[],[]];return t.faces.forEach((function(t){var n;(n=t,E(function(t){return S(y(t))}(n),x(n))).forEach((function(n,r){var o=(r+x(t))%f.length;e[o].push(n)}))})),t.branches.forEach((function(t){var n;(n=t,E(function(t){return S(m(t))}(n),n.direction)).forEach((function(n,r){var o=(r+t.direction)%f.length;e[o].push(n)}))})),e}(e);"branching"===t.currentGrowthType?(function(t,e){t.branches.forEach((function(n,r){if(r+=t.faces.length,n.growing){for(var o=n.direction,i=o,c=a(o-1,f.length),g=e[i][r],h=e[c][r],l=e[i],s=e[c],u=0;u<l.length;++u)if(u!==r&&void 0!==k(l[u],g)){n.growing=!1;break}if(n.growing)for(u=0;u<s.length;++u)if(u!==r&&void 0!==k(s[u],h)){n.growing=!1;break}}}))}(e,w),e.branches.forEach((function(t){var e,n,i,a;t.growing&&(e=t,i=-1.5*(n=p.scale)+1.5,a=1.5*n,e.size+=a*o*e.growthScale,e.length+=i*r*e.growthScale)}))):(function(t,e){t.faces.forEach((function(t,n){if(t.growing){for(var r=x(t),o=r,i=a(r-1,f.length),c=e[o][n],g=e[i][n],h=e[o],l=e[i],s=0;s<h.length;++s)if(s!==n&&void 0!==k(h[s],c)){t.growing=!1;break}if(t.growing)for(s=0;s<l.length;++s)if(s!==n&&void 0!==k(l[s],g)){t.growing=!1;break}}}))}(e,w),e.faces.forEach((function(t){t.growing&&function(t,e){if(t.size+=.75*e*r*t.growthScale,"none"!==t.direction){var n=.75*e*r*Math.cos(f[t.direction])*t.growthScale,o=.75*e*r*Math.sin(f[t.direction])*t.growthScale;t.center.x+=n,t.center.y+=o}}(t,p.scale)}))),u(g),function(t,e){e.faces.forEach((function(e){return function(t,e){"none"===e.direction||e.direction,t.ctx.beginPath(),y(e).forEach((function(e,n){var r=v(t,e),o=r.x,i=r.y;0===n?t.ctx.moveTo(o,i):t.ctx.lineTo(o,i)})),t.ctx.closePath(),t.ctx.fillStyle="rgba(255, 255, 255, 1)",t.ctx.fill()}(t,e)})),e.branches.forEach((function(e){return function(t,e){t.ctx.beginPath(),m(e).forEach((function(e,n){var r=v(t,e),o=r.x,i=r.y;0===n?t.ctx.moveTo(o,i):t.ctx.lineTo(o,i)})),t.ctx.closePath(),t.ctx.fillStyle="rgba(255, 255, 255, 1)",t.ctx.fill()}(t,e)}))}(g,e)}(function(t){var e,n,r=t.graph,o=t.writableGraphHeight;if(void 0!==r.handleBeingDragged||r.mouseRecentlyExitedGraph){r.mouseRecentlyExitedGraph=!1;var a="needs lookup"===r.handleBeingDragged&&void 0!==r.graphMouse?T(t,r.graphMouse):r.handleBeingDragged;if("needs lookup"===r.handleBeingDragged&&(r.handleBeingDragged=a),void 0!==r.graphMouse&&"needs lookup"!==a){var c=o/i.length,g=Math.floor(r.graphMouse.y/c);void 0!==a&&(r.growthInput[a]=(e=g,n=i.length-1,Math.min(Math.max(e,0),n)))}}var h=void 0!==r.handleBeingDragged?"none":"auto",l=function(t){return t.setAttribute("style","user-select: ".concat(h))};Array.from(document.getElementsByClassName("graphLabel")).forEach(l),Array.from(document.getElementsByClassName("control")).forEach(l);var s=document.getElementById("controlContainer");null!==s&&l(s)})(t),n.ctx.clearRect(0,0,n.canvas.width,n.canvas.height),function(t){var e=t.graph,n=t.writableGraphWidth,r=t.writableGraphHeight,o=t.graphMargin,i=t.step/t.maxSteps,a=e.ctx.fillStyle;e.ctx.fillStyle=e.options.progressColor,e.ctx.fillRect(o,0,n*i,r),e.ctx.fillStyle=a,e.ctx.beginPath();var c=s(e,n,r,o,0);e.ctx.moveTo(c.x,c.y);for(var g=1;g<e.growthInput.length;g+=1)c=s(e,n,r,o,g),e.ctx.lineTo(c.x,c.y);for(e.ctx.strokeStyle=e.options.foregroundColor,e.ctx.stroke(),g=0;g<e.growthInput.length;g+=1)if(c=s(e,n,r,o,g),void 0!==e.graphMouse){var h=T(t,e.graphMouse);l(e,c.x,c.y,g===h,g===e.handleBeingDragged)}else l(e,c.x,c.y,!1,!1);e.ctx.beginPath();var u=n*i+o;e.ctx.moveTo(u,0),e.ctx.lineTo(u,r),e.ctx.strokeStyle=e.options.progressLineColor,e.ctx.stroke(),e.ctx.beginPath();var f=.5*r;e.ctx.moveTo(o,f),e.ctx.lineTo(n+o,f),e.ctx.strokeStyle=e.options.foregroundColor,e.ctx.setLineDash([2,2]),e.ctx.stroke(),e.ctx.setLineDash([])}(t)}function G(t){var e=function(t){var e=function(t){var e=document.getElementById("graph"),n=e.getContext("2d");if(null!==n){var r={options:t,canvas:e,ctx:n,handleBeingDragged:void 0,mouseRecentlyExitedGraph:!1,graphMouse:void 0,growthInput:h()};return e.addEventListener("mousemove",(function(t){r.graphMouse={x:t.offsetX,y:t.offsetY}})),e.addEventListener("mousedown",(function(t){r.handleBeingDragged="needs lookup"})),document.addEventListener("mouseup",(function(t){r.handleBeingDragged=void 0,r.graphMouse=void 0})),e.addEventListener("mouseleave",(function(t){r.mouseRecentlyExitedGraph=!0})),r}}(t.graphOptions),n=function(){var t=document.getElementById("snowflake"),e=t.getContext("2d");if(null!==e)return e.fillStyle="rgba(90, 211, 255, 1.0)",{canvas:t,ctx:e}}();if(void 0!==e&&void 0!==n)return{graph:e,graphic:n,snowflake:{faces:[{center:{x:0,y:0},size:.0025,direction:"none",growthScale:1,growing:!0}],branches:[]},currentGrowthType:void 0,graphMargin:10,writableGraphWidth:e.canvas.width-20,writableGraphHeight:e.canvas.height,controls:{pause:document.getElementById("pause"),reset:document.getElementById("reset"),playing:!0},step:0,intervalId:void 0,updateInterval:5,maxSteps:1e3};console.error("Couldn't get drawing context")}(t({snowflakeInstallationElement:document.body,controlsInstallationElement:document.body,graphOptions:{progressColor:"rgba(255, 255, 255, 1)",progressLineColor:"rgba(220, 220, 220, 1)",backgroundColor:"rgba(0, 0, 0, 1)",foregroundColor:"rgba(0, 0, 0, 1)"}}));void 0!==e&&(function(t){var e=t.controls,n=t.graphic;e.pause.addEventListener("click",(function(t){e.playing=!e.playing,e.playing?(e.pause.innerHTML="pause",n.canvas.className=""):(e.pause.innerHTML="play",n.canvas.className="paused")})),e.reset.addEventListener("click",(function(e){!function(t){var e;(e=t.snowflake).faces.length=1,e.faces[0]={center:{x:0,y:0},size:.0025,direction:"none",growthScale:1,growing:!0},e.branches.length=0,t.step=0,t.currentGrowthType=void 0,u(t.graphic)}(t)}))}(e),e.intervalId=window.setInterval((function(){return I(e)}),e.updateInterval))}Main=e})();