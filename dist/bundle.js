(()=>{"use strict";var e=2*Math.PI/6,t=.001,n=[-1,-.75,-.5,-.25,0,.25,.5,.75,1];function r(e,t,n){return(1-n)*e+n*t}function a(e,t,n,r,a){var o=e.ctx.fillStyle,c=e.ctx.strokeStyle,i=e.ctx.getLineDash(),h="black",s=r?8:5,l=a?[2,2]:[];e.ctx.beginPath(),e.ctx.arc(t,n,3,0,2*Math.PI),e.ctx.closePath(),e.ctx.fillStyle=h,e.ctx.fill(),e.ctx.closePath(),e.ctx.beginPath(),e.ctx.arc(t,n,s,0,2*Math.PI),e.ctx.strokeStyle=h,e.ctx.setLineDash(l),e.ctx.stroke(),e.ctx.fillStyle=o,e.ctx.strokeStyle=c,e.ctx.setLineDash(i)}var o=function(){for(var e=[0],t=0;t<16;t++)e[t]=Math.floor(9*Math.random());return e}();function c(e,t,r,a){return{x:e/(o.length-1)*a+r,y:4*n[o[a]]*(t/n.length)+.5*t}}function i(e){e.ctx.clearRect(0,0,e.canvas.width,e.canvas.height)}var h=[0*e,1*e,2*e,3*e,4*e,5*e];function s(e,t){var n=e.canvas.width,r=e.canvas.height;return{x:t.x*n*.5+.5*n,y:t.y*-r*.5+.5*r}}function l(e){for(var t="none"===e.direction?0:e.direction,n=[],r=0;r<h.length;r+=1){var a=h[(t+r)%h.length];n.push({x:e.center.x+e.size*Math.cos(a),y:e.center.y+e.size*Math.sin(a)})}return n}var g,u=function(){return u=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},u.apply(this,arguments)};function d(e){var t=h[e.direction],n=e.length;return{x:e.start.x+n*Math.cos(t),y:e.start.y+n*Math.sin(t)}}function f(e,t){t.faces.forEach((function(t){return function(e,t){"none"===t.direction||t.direction,e.ctx.beginPath(),l(t).forEach((function(t,n){var r=s(e,t),a=r.x,o=r.y;0===n?e.ctx.moveTo(a,o):e.ctx.lineTo(a,o)})),e.ctx.closePath(),e.ctx.fillStyle="rgba(203, 203, 255, 1)",e.ctx.fill()}(e,t)})),t.branches.forEach((function(t){return function(e,t){e.ctx.beginPath(),function(e){var t=[],n=l(function(e){return u(u({},{center:{x:0,y:0},size:.0025,direction:"none",growthScale:1,growing:!0}),{center:(t=e.start,{x:t.x,y:t.y}),size:e.size,direction:e.direction});var t}(e)),r=l(function(e){return u(u({},{center:{x:0,y:0},size:.0025,direction:"none",growthScale:1,growing:!0}),{center:(t=e.start,n={x:e.length*Math.cos(h[e.direction]),y:e.length*Math.sin(h[e.direction])},{x:t.x+n.x,y:t.y+n.y}),size:e.size,direction:e.direction});var t,n}(e));return t.push(r[0]),t.push(r[1]),t.push(n[2]),t.push(n[3]),t.push(n[4]),t.push(r[5]),t}(t).forEach((function(t,n){var r=s(e,t),a=r.x,o=r.y;0===n?e.ctx.moveTo(a,o):e.ctx.lineTo(a,o)})),e.ctx.closePath(),e.ctx.fill()}(e,t)}))}function x(e,t){for(var n=e.writableGraphWidth,r=e.writableGraphHeight,a=e.graphMargin,i=1/0,h=0,s=0;s<o.length;s+=1){var l=c(n,r,a,s).x-t.x,g=l*l;g<i&&(i=g,h=s)}return h}function p(e){var s,l,g,u,p=e.snowflake,v=e.graph,y=e.graphic,w=e.maxSteps,m=e.controls;if(e.step<w&&m.playing){e.step+=1;var b=(s=function(e){return e.step/e.maxSteps}(e),g=function(e){return e%1}(l=r(0,o.length-1,s)),u=r(n[o[Math.floor(l)]],n[o[Math.ceil(l)]],g),{scale:(-.01*l+1)*Math.abs(u),growthType:u>0?"branching":"faceting"});void 0===e.currentGrowthType&&(e.currentGrowthType=b.growthType),e.currentGrowthType!==b.growthType&&(e.currentGrowthType=b.growthType,"branching"===e.currentGrowthType?function(e){e.faces.forEach((function(t){t.growing&&(function(e,t){for(var n,r,a=.01*t.size,o=1*t.size*.99,c=t.center.x,i=t.center.y,s="none"===t.direction?[0,6]:[(n=t.direction,((n-1)%(r=h.length)+r)%r),3],l=s[1],g=s[0],u=function(n){var r=c+o*Math.cos(h[g]),s=i+o*Math.sin(h[g]),l="none"===t.direction||1===n?.9*t.growthScale:.5*t.growthScale*1;e.branches.push({start:{x:r,y:s},size:a,length:0,direction:g,growthScale:l,growing:!0}),g=function(e){return(e+1)%h.length}(g)},d=0;d<l;d+=1)u(d)}(e,t),t.growing=!1)}))}(p):function(e){e.branches.forEach((function(t){t.growing&&(function(e,t){e.faces.push({center:d(t),size:t.size,direction:t.direction,growthScale:t.growthScale,growing:!0})}(e,t),t.growing=!1)}))}(p)),"branching"===e.currentGrowthType?p.branches.forEach((function(e){var n,r,a,o;e.growing&&(a=-1.5*(r=b.scale)+1.5,o=1.5*r,(n=e).size+=3e-4*o*n.growthScale,n.length+=a*t*n.growthScale)})):p.faces.forEach((function(e){e.growing&&function(e,n){if(e.size+=.75*n*t*e.growthScale,"none"!==e.direction){var r=.75*n*t*Math.cos(h[e.direction])*e.growthScale,a=.75*n*t*Math.sin(h[e.direction])*e.growthScale;e.center.x+=r,e.center.y+=a}}(e,b.scale)})),i(y),f(y,p)}(function(e){var t,r,a=e.graph,c=e.writableGraphHeight;if(void 0!==a.handleBeingDragged||a.mouseRecentlyExitedGraph){a.mouseRecentlyExitedGraph=!1;var i="needs lookup"===a.handleBeingDragged&&void 0!==a.graphMouse?x(e,a.graphMouse):a.handleBeingDragged;if("needs lookup"===a.handleBeingDragged&&(a.handleBeingDragged=i),void 0!==a.graphMouse&&"needs lookup"!==i){var h=c/n.length,s=Math.floor(a.graphMouse.y/h);void 0!==i&&(o[i]=(t=s,r=n.length-1,Math.min(Math.max(t,0),r)))}}var l=void 0!==a.handleBeingDragged?"none":"auto",g=function(e){return e.setAttribute("style","user-select: ".concat(l))};Array.from(document.getElementsByClassName("graphLabel")).forEach(g),Array.from(document.getElementsByClassName("control")).forEach(g);var u=document.getElementById("controlContainer");null!==u&&g(u)})(e),v.ctx.clearRect(0,0,v.canvas.width,v.canvas.height),function(e){var t=e.graph,n=e.writableGraphWidth,r=e.writableGraphHeight,i=e.graphMargin,h=e.step/e.maxSteps,s=t.ctx.fillStyle;t.ctx.fillStyle=t.background,t.ctx.fillRect(i,0,n*h,r),t.ctx.fillStyle=s,t.ctx.beginPath();var l=c(n,r,i,0);t.ctx.moveTo(l.x,l.y);for(var g=1;g<o.length;g+=1)l=c(n,r,i,g),t.ctx.lineTo(l.x,l.y);for(t.ctx.strokeStyle="black",t.ctx.stroke(),g=0;g<o.length;g+=1)if(l=c(n,r,i,g),void 0!==t.graphMouse){var u=x(e,t.graphMouse);a(t,l.x,l.y,g===u,g===t.handleBeingDragged)}else a(t,l.x,l.y,!1,!1);t.ctx.beginPath();var d=n*h+i;t.ctx.moveTo(d,0),t.ctx.lineTo(d,r),t.ctx.strokeStyle="blue",t.ctx.stroke(),t.ctx.beginPath();var f=.5*r;t.ctx.moveTo(i,f),t.ctx.lineTo(n+i,f),t.ctx.strokeStyle="black",t.ctx.setLineDash([2,2]),t.ctx.stroke(),t.ctx.setLineDash([])}(e)}void 0!==(g=function(){var e=function(){var e=document.getElementById("graph"),t=e.getContext("2d");if(null!==t){var n={canvas:e,ctx:t,handleBeingDragged:void 0,mouseRecentlyExitedGraph:!1,graphMouse:void 0,background:"rgba(203, 203, 255, 1)"};return e.addEventListener("mousemove",(function(e){n.graphMouse={x:e.offsetX,y:e.offsetY}})),e.addEventListener("mousedown",(function(e){n.handleBeingDragged="needs lookup"})),document.addEventListener("mouseup",(function(e){n.handleBeingDragged=void 0,n.graphMouse=void 0})),e.addEventListener("mouseleave",(function(e){n.mouseRecentlyExitedGraph=!0})),n}}(),t=function(){var e=document.getElementById("snowflake"),t=e.getContext("2d");if(null!==t)return t.fillStyle="rgba(90, 211, 255, 1.0)",{canvas:e,ctx:t}}();if(void 0!==e&&void 0!==t)return{graph:e,graphic:t,snowflake:{faces:[{center:{x:0,y:0},size:.0025,direction:"none",growthScale:1,growing:!0}],branches:[]},currentGrowthType:void 0,graphMargin:10,writableGraphWidth:e.canvas.width-20,writableGraphHeight:e.canvas.height,controls:{pause:document.getElementById("pause"),reset:document.getElementById("reset"),playing:!0},step:0,intervalId:void 0,updateInterval:5,maxSteps:1e3};console.error("Couldn't get drawing context")}())&&(function(e){var t=e.controls,n=e.graphic;t.pause.addEventListener("click",(function(e){t.playing=!t.playing,t.playing?(t.pause.innerHTML="pause",n.canvas.className=""):(t.pause.innerHTML="play",n.canvas.className="paused")})),t.reset.addEventListener("click",(function(t){!function(e){var t;(t=e.snowflake).faces.length=1,t.faces[0]={center:{x:0,y:0},size:.0025,direction:"none",growthScale:1,growing:!0},t.branches.length=0,e.step=0,e.currentGrowthType=void 0,i(e.graphic)}(e)}))}(g),g.intervalId=window.setInterval((function(){return p(g)}),g.updateInterval))})();